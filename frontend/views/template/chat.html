<div id="chat_window_1" ng-controller="ChatCtrl"  >
        <div class="panel panel-primary " id="chat_panel" >
            <div class="panel-heading container-fluid" id="accordion">
                <span class="glyphicon glyphicon-comment"></span> Chat
                
                <div class="btn-group pull-right">
                    <!-- <button ng-if="isLoggedin" class="btn btn-xs logoutbtn btn-primary" ng-click="logout();">Logout </button> -->
                    <div class="dropdown toolbaroption" ng-if="isLoggedin">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span class="glyphicon glyphicon-option-vertical"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <!-- <li>
                                <a class="" ng-click="opensaveBookmark();">
                                    <span class="glyphicon glyphicon-star-empty"></span> &nbsp;Save Bookmark
                                </a>
                            </li> -->
                            <li>
                                <a class="" ng-click="openviewBookmark();">
                                    <span class="glyphicon glyphicon-star"></span> &nbsp;Load History
                                </a>
                            </li>
                            <!-- <li>
                                <a class="" ng-click="openMailmodal();">
                                    <span class="glyphicon glyphicon-envelope"></span> &nbsp; Mail
                                </a>
                            </li> -->
                            <li>
                                <a ng-if="isLoggedin" class=" logoutbtn" ng-click="logout();">
                                    <span class="glyphicon glyphicon-off"></span> &nbsp;    Logout 
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                    <a type="button" class="btn btn-default btn-xs hidden" href="#">
                        <span id="minim_chat_window " class="glyphicon glyphicon-minus icon_minim"></span>
                    </a>
                    <a type="button" class="btn btn-default btn-xs" ng-click="minimizeChatwindow();" href="#">
                        <span class="glyphicon glyphicon-remove icon_close" data-id="chat_window_1"></span>
                    </a>
                </div>
            </div>
            <div class="container-fluid chatbody">
                <div class="row" ng-if="!isLoggedin">
                    <div class="col-sm-8 col-sm-offset-2 col-xs-12">
                        <div class="login">
                            <div class="login-container">
                                <h1 class="text-center">Login</h1><br>
                                <form id="login_form" name="login_form">
                                    <div class="form-group">
                                        
                                        <input class="form-control name" id="name" type="text" name="name" placeholder="Name" ng-model="user.name" required>
                                        <div class="pull-right" ng-repeat="(field,value) in login_form.name.$error" ng-show="login_form.name.$touched">
                                            <span class="label label-danger" ng-if="field=='name' && value">Please Enter Name</span>
                                        </div>
                                        <input class="form-control username" id="username" type="email" name="username" placeholder="Email" ng-model="user.username" required>
                                        <div class="pull-right" ng-repeat="(field,value) in login_form.username.$error" ng-show="login_form.username.$touched">
                                            <span class="label label-danger" ng-if="field=='email' && value">Please Enter Valid Email</span>
                                        </div>
                                        <div class="pull-right"  ng-if="loginerror==-1">
                                            <span class="label label-danger">Please Enter Valid Name/Email</span>
                                        </div>
                                        <div class="pull-right"  ng-if="!isLoggedin">
                                            <span class="label label-danger">Please Login To Continue</span>
                                        </div>
                                        <input class="form-control" id='login' type="submit" name="login" ng-disabled="login_form.$invalid"  class="btn btn-primary btn-lg btn-block" value="Login" ng-click="login(user.name,user.username);">
                                    </div>
                                </form>
                            <!-- <div class="login-help">
                                <a href="#" class="text-center" ng-click="openForgotpassword();">Forgot Password</a>
                            </div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" ng-if="isLoggedin">
                    <div class="col-md-12 chatbody2 col-xs-12">
                        <div class="panel-body row"> 
                            <ul class="chat" >
                                <li class="{{list.position}} lastchat clearfix animate_fade"   ng-repeat="list in chatlist track by $index">
                                    <span class="chat-img pull-{{list.position}}">
                                        <span ng-if="list.position == 'left'">
                                            <img ng-src="img/sbi.png" alt="SBI" class="img-circle " />
                                        </span>
                                        <span ng-if="list.position == 'right'">
                                            <img ng-src="img/{{list.position == 'left' && 'sbi.png' || 'logo7.png'}}" alt="BOT" class="img-circle " />
                                        </span>
                                    </span>
                                    <div class="chat-body " >
                                        <div class="clearfix" ng-if="list.position==='right'">
                                            <p class="lastmsg" >
                                                <!-- <ng-bind-html ng-bind-html = "list.msg">
                                                    {{list.msg}}
                                                </ng-bind-html> -->
                                                <span >{{list.msg}}</span>
                                            </p>
                                            
                                        </div>
                                        <div class=" clearfix" ng-if="list.position==='left' && list.msg.tiledlist ">
                                            <div class="sysChatRes"  ng-repeat="chatRes in list.msg.tiledlist">
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='text'">
                                                    <p class="lastmsg" >
                                                        <ng-bind-html ng-bind-html = "trustedHtml(chatRes.Text);">
                                                            
                                                            {{chatRes.Text}}
                                                        </ng-bind-html>
                                                        
                                                    </p>
                                                    <div ng-if="chatRes.pdfpath">
                                                        <a href="http://35.161.160.7:8095/{{chatRes.pdfpath}}" target="_blank">View Policy</a>
                                                    </div>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='form type'">
                                                    <div class="checkbox">
                                                        <input type="radio" name="havepolicy[]" ng-click="havepolicy(1,$index);" value="1" ng-model="p[$index].havepolicy"> Have Policy No
                                                        <input type="radio" name="havepolicy[]" ng-click="havepolicy(0,$index);" value="0" ng-model="p[$index].havepolicy"> Don't Have Policy No
                                                    </div>
                                                    <p class="lastmsg" >
                                                        <ng-bind-html style="display:none;" class="showpolicynoform{{$index}}">
                                                            <label for="p[$index].policy_no">Please enter your policy number </label>
                                                            <input type="text"  ng-model="p[$index].policy_no"  class="form-control policy_no{{$index}}" name="policy_no" id="policy_no" format-policy >
                                                            <br>
                                                            
                                                        </ng-bind-html>
                                                        <input class='policy_btn btn btn-default pull-right' id='policy_btn' type='button' value='Submit' ng-click="policy_noSubmit(p[$index].policy_no,p[$index].havepolicy);" />
                                                    </p>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='claim form type'">
                                                    <div class="checkbox">
                                                        <input type="radio" name="haveclaim[]" ng-click="haveclaim(1,$index);" value="1" ng-model="p[$index].haveclaim"> Have Claim No
                                                        <input type="radio" name="haveclaim[]" ng-click="haveclaim(0,$index);" value="0" ng-model="p[$index].haveclaim"> Don't Have Claim No
                                                    </div>
                                                    <p class="lastmsg" >
                                                        <ng-bind-html style="display:none;" class="showclaimnoform{{$index}}">
                                                            <label for="p[$index].claim_no">Please enter your Claim number </label>
                                                            <input type="text"  ng-model="p[$index].claim_no"  class="form-control claim_no{{$index}}" name="claim_no" id="claim_no" format-claim >
                                                            <br>
                                                            
                                                        </ng-bind-html>
                                                        <input class='policy_btn btn btn-default pull-right' id='policy_btn' type='button' value='Submit' ng-click="claim_noSubmit(p[$index].claim_no,p[$index].haveclaim);" />
                                                    </p>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='grievance form type'">
                                                    <div class="checkbox">
                                                        <input type="radio" name="havegr[]" ng-click="havegr(1,$index);" value="1" ng-model="p[$index].havegr"> Have SR No
                                                        <input type="radio" name="havegr[]" ng-click="havegr(0,$index);" value="0" ng-model="p[$index].havegr"> Don't Have SR No
                                                    </div>
                                                    <p class="lastmsg" >
                                                        <ng-bind-html style="display:none;" class="showgrform{{$index}}">
                                                            <label for="p[$index].gr_no">Please enter your Service Request number </label>
                                                            <input type="text"  ng-model="p[$index].gr_no"  class="form-control gr_no{{$index}}" name="gr_no" id="gr_no" format-gr >
                                                            <br>
                                                            
                                                        </ng-bind-html>
                                                        <input class='policy_btn btn btn-default pull-right' id='policy_btn' type='button' value='Submit' ng-click="gr_noSubmit(p[$index].gr_no,p[$index].havegr);" />
                                                    </p>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='dob form type'">
                                                    <p class="lastmsg" >
                                                        <ng-bind-html  class="showdobform{{$index}}">
                                                            <label for="dob[$index].dob">Please enter Date of Birth </label>
                                                            <input type="date"  ng-model="dob[$index].dob"  class="form-control dob{{$index}}" name="dob" id="dob"  >
                                                            <br>
                                                            
                                                        </ng-bind-html>
                                                        <input class='policy_btn btn btn-default pull-right' id='dob_btn' type='button' value='Submit' ng-click="dob_Submit(dob[$index].dob);" />
                                                    </p>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='mobile form type'">
                                                    <p class="lastmsg" >
                                                        <ng-bind-html >
                                                            <label for="p[$index].mobile_no">Please enter your mobile number</label>
                                                            <input type="text"  ng-model="p[$index].mobile_no"  class="form-control mobile_no" name="mobile_no" id="mobile_no" format-phone>
                                                            <br>
                                                            <input class='policy_btn btn btn-default pull-right' id='mobile_btn' type='button' value='Submit' ng-click="mobile_noSubmit(p[$index].mobile_no);" />
                                                        </ng-bind-html>
                                                        
                                                    </p>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='view employee form'">
                                                    <form class="form-inline" name="selectkeyform">
                                                
                                                        <div class="form-group col-md-6">
                                                            <!-- <label for="exampleInputName2">Name</label> -->
                                                            <select ng-model="s.selectedKey" class="form-control skey" required>
                                                                <option ng-repeat="x in keys" value="{{x.id}}">{{x.name}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <!-- <label for="exampleInputEmail2">Email</label> -->
                                                            <input type="text" class="form-control sval" ng-model="s.selectedValue" id="exampleInputEmail2" placeholder="" required>
                                                        </div>
                                                        <div class="form-group col-md-6 searchdiv">
                                                            <button type="submit" class="btn btn-default btn-primary" ng-disabled="selectkeyform.$invalid" ng-click="getpolicy(s.selectedKey,s.selectedValue);">Search</button>
                                                            <!-- <button type="submit" class="btn btn-default btn-primary"  ng-click="getpolicy('','');">Reset</button> -->
                                                        </div>
                                                    </form>
                                                    <!-- <div class="form-group">
                                                        <input ng-model="search.query" type="text" placeholder="Search" class="form-control searchpolicy" autofocus ng-change="getpolicy(search.query);">
                                                    </div> -->
                                                    <table class="table table-hover">
                                                        <thead> 
                                                            <tr>
                                                                <th>
                                                                    Policy No
                                                                </th>
                                                                <th>
                                                                    Customer Email
                                                                </th>
                                                                <th>

                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="plist in policylist">
                                                                <td>
                                                                    {{plist.policyno}} <br>
                                                                    <div class="edittoggler editform{{$index}}" style="display:none;">
                                                                        <form class="editpolicy"  name="editpolicy" id="editpolicy">
                                                                            <div class="form-group" ng-if="editpolicysuccess==1">
                                                                                <div class="pull-left col-md-12" >
                                                                                    <span class="label label-success" >Data Edited Successfully.</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group hidden">
                                                                                <label for="" class=""></label> 
                                                                                <input type="text" class="form-control" id="id" name="id" placeholder="" ng-model="plist._id" required value="{{plist._id}}">
                                                                                
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="policyno" class="">Policy No</label> 
                                                                                <input type="text" class="form-control" id="policyno" name="policyno" placeholder="Policy No" ng-model="plist.policyno" required format-policy ng-minlength="16" ng-maxlength="16" >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.policyno.$error" ng-show="editpolicy.policyno.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Policy No</span>
                                                                                    <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 16 Digit Policy No</span>
                                                                                </div> 
                                                                            </div>
                                                                                <div class="form-group">
                                                                                <label for="inception_date">Inception Date</label> 
                                                                                <input type="date" name="inception_date" class="form-control" id="inception_date" placeholder="" ng-model="plist.inceptiondate" required >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.inception_date.$error" ng-show="editpolicy.inception_date.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Inception date</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="expiry_date">Expiry Date</label> 
                                                                                <input type="date" name="expiry_date" class="form-control" id="expiry_date" placeholder="" required ng-model="plist.expirydate">
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.expiry_date.$error" ng-show="editpolicy.expiry_date.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Expiry date</span>
                                                                                </div>
                                                                            </div> 
                                                                            <div class="form-group">
                                                                                <label for="stamount">Service TAX Amount</label> 
                                                                                <input type="number" name="stamount" class="form-control" id="stamount" placeholder="" required ng-model="plist.service_tax_amount" >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.stamount.$error" ng-show="editpolicy.stamount.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Service TAX Amount</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="agent_name">Agent Name</label> 
                                                                                <input type="text" name="agent_name" class="form-control" id="agent_name" placeholder="" required ng-model="plist.agent_name" >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.agent_name.$error" ng-show="editpolicy.agent_name.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent Name</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="prem_amount">Premium Amount</label> 
                                                                                <input type="number" name="prem_amount" class="form-control" id="prem_amount" placeholder="" required ng-model="plist.premium_amount" >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.prem_amount.$error" ng-show="editpolicy.prem_amount.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Premium Amount</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="agent_no">Agent Contact No</label> 
                                                                                <input type="text" name="agent_no" class="form-control" id="agent_no" placeholder="" required ng-model="plist.agent_contact_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.agent_no.$error" ng-show="editpolicy.agent_no.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent No</span>
                                                                                    <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit No</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="cust_no">Customer Contact No</label> 
                                                                                <input type="text" name="cust_no" class="form-control" id="cust_no" placeholder="" required ng-model="plist.customer_contact_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.cust_no.$error" ng-show="editpolicy.cust_no.$touched" >
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter Customer Contact No</span>
                                                                                    <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit  No</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group">
                                                                                <label for="cust_no">Customer Email</label> 
                                                                                <input type="email" name="cust_email" class="form-control" id="cust_email" placeholder="" required ng-model="plist.customer_email" >
                                                                                <div class="pull-right" ng-repeat="(field,value) in editpolicy.cust_email.$error" ng-show="editpolicy.cust_email.$touched">
                                                                                    <span class="label label-danger" ng-if="field=='required' && value">Please Enter EmailID</span>
                                                                                    <span class="label label-danger" ng-if="field=='email' && value">Please Enter Valid Email</span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group" ng-if="editpolicysuccess==-1">
                                                                                <div class="pull-right"  >
                                                                                    <span class="label label-danger">Please Try Again.</span>
                                                                                </div>
                                                                            </div>
                                                                            <button type="submit" class="btn btn-default" ng-disabled="editpolicy.$invalid" ng-click="editpolicysubmit(plist);">Save</button>
                                                                        </form>
                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    {{plist.customer_email}}
                                                                </td>
                                                                <td>
                                                                    <button class="btn btn-xs btn-primary" type="button" ng-click="toggleedit($index);">
                                                                        <span class="glyphicon glyphicon-pencil"></span>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <nav aria-label="Page navigation">
                                                        <ul class="pagination">
                                                            <li ng-if="showprevlink">
                                                                <a href="#" aria-label="Previous" ng-click="prevpage(viewPage);">
                                                                    <span aria-hidden="true">&laquo;</span>
                                                                </a>
                                                            </li>
                                                            <li ng-repeat="n in getNumber(linkcount) track by $index" ng-class="{'active':(($index+1)==viewPage)}">
                                                                <a href="#"  ng-click="getpage($index+1);">{{$index+1}}</a>
                                                            </li>
                                                            <li ng-if="shownextlink">
                                                                <a href="#" aria-label="Next" ng-click="nextpage(viewPage);">
                                                                    <span aria-hidden="true">&raquo;</span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </nav>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='add employee form'">
                                                    <form class="createpolicy"  name="createpolicy" id="createpolicy">
                                                        <div class="form-group" ng-if="policysuccess==1">
                                                            <div class="pull-left col-md-12" >
                                                                <span class="label label-success" >Data Submitted Successfully.</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="policyno" class="">Policy No</label> 
                                                            <input type="text" class="form-control" id="policyno" name="policyno" placeholder="Policy No" ng-model="f.policyno" format-policy ng-minlength="16" ng-maxlength="16" required >
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.policyno.$error" ng-show="createpolicy.policyno.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Policy No</span>
                                                                <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 16 Digit Policy No</span>
                                                            </div> 
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="inception_date">Inception Date</label> 
                                                            <input type="date" name="inception_date" class="form-control" id="inception_date" placeholder="" ng-model="f.inception_date" required>
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.inception_date.$error" ng-show="createpolicy.inception_date.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Inception date</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="expiry_date">Expiry Date</label> 
                                                            <input type="date" name="expiry_date" class="form-control" id="expiry_date" placeholder="" required ng-model="f.expiry_date">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.expiry_date.$error" ng-show="createpolicy.expiry_date.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Expiry date</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="stamount">Service TAX Amount</label> 
                                                            <input type="number" name="stamount" class="form-control" id="stamount" placeholder="" required ng-model="f.stamount">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.stamount.$error" ng-show="createpolicy.stamount.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Service TAX Amount</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="agent_name">Agent Name</label> 
                                                            <input type="text" name="agent_name" class="form-control" id="agent_name" placeholder="" required ng-model="f.agent_name">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.agent_name.$error" ng-show="createpolicy.agent_name.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent Name</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="prem_amount">Premium Amount</label> 
                                                            <input type="number" name="prem_amount" class="form-control" id="prem_amount" placeholder="" required ng-model="f.prem_amount">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.prem_amount.$error" ng-show="createpolicy.prem_amount.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Premium Amount</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="agent_no">Agent Contact No</label> 
                                                            <input type="text" name="agent_no" class="form-control" id="agent_no" placeholder="" required ng-model="f.agent_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.agent_no.$error" ng-show="createpolicy.agent_no.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent No</span>
                                                                <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit No</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="cust_no">Customer Contact No</label> 
                                                            <input type="text" name="cust_no" class="form-control" id="cust_no" placeholder="" required ng-model="f.cust_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.cust_no.$error" ng-show="createpolicy.cust_no.$touched" >
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter Customer Contact No</span>
                                                                <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit  No</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="cust_no">Customer Email</label> 
                                                            <input type="email" name="cust_email" class="form-control" id="cust_email" placeholder="" required ng-model="f.cust_email">
                                                            <div class="pull-right" ng-repeat="(field,value) in createpolicy.cust_email.$error" ng-show="createpolicy.cust_email.$touched">
                                                                <span class="label label-danger" ng-if="field=='required' && value">Please Enter EmailID</span>
                                                                <span class="label label-danger" ng-if="field=='email' && value">Please Enter Valid Email</span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" ng-if="policysuccess==-1">
                                                            <div class="pull-right"  >
                                                                <span class="label label-danger">Please Try Again.</span>
                                                            </div>
                                                        </div>
                                                        <button type="submit" class="btn btn-default" ng-disabled="createpolicy.$invalid" ng-click="createpolicysubmit(f.policyno,f.inception_date,f.expiry_date,f.stamount,f.agent_name,f.prem_amount,f.agent_no,f.cust_no,f.cust_email);">Add</button>
                                                    </form>
                                                </div>
                                                <div class="chatType" ng-if="list.msg.tiledlist[0].type==='DTHyperlink'">
                                                    
                                                    <ng-bind-html ng-if="chatRes.Text != ''" ng-bind-html="chatRes.Text|newlines">
                                                        <p class="lastmsg"  >
                                                            {{chatRes.Text}}     
                                                        </p>
                                                    </ng-bind-html>
                                                    <ng-bind-html ng-if="chatRes.Process.length > 0 "  ng-repeat="p in chatRes.Process" ng-bind-html="trustedHtml(p)">
                                                    <div class=" lastmsg"  >
                                                        {{p}}
                                                    </div>
                                                    </ng-bind-html>
                                                    <div class="dthyperlink lastmsg" ng-repeat="dthlink in chatRes.DTHyperlink" data-id="{{dthlink}}" data-url-id="innerLink" data-line="{{chatRes.line_no[$index]}}" data-col="{{chatRes.col_no[$index]}}" ng-click="getDthlinkRes(chatRes.col_no[$index],chatRes.line_no[$index],dthlink);">
                                                        {{dthlink}}
                                                    </div>
                                                </div>
                                                
                                                <!-- <div class="chatType" ng-if="list.msg.tiledlist[0].type==='Instruction'">
                                            
                                                                                                        
                                                    <div class='carousel slide' id='myCarousel'>
                                                        <div class='carousel-inner'>
                                                            <div class='item carousel_item' ng-class="{active:!$index}" ng-repeat="imglist in chatRes.imagelist track by $index" ng-if="$index % 3 == 0">
                                                                <div class="col-xs-4" >
                                                                    <div class="img-box">
                                                                        <a ng-href="{{chatRes.imagelist[$index].Image}}"  data-fancybox="group" rel="gallary" fancybox >
                                                                            <img ng-src="{{chatRes.imagelist[$index].Image}}" class="img-full">
                                                                        </a>
                                                                    </div>
                                                                    <div class="text-box" ng-if="chatRes.imagelist[$index].Text!='Text'">
                                                                        <span>
                                                                            <ng-bind-html  ng-bind-html="chatRes.imagelist[$index].Text|newlines">
                                                                                {{chatRes.imagelist[$index].Text}}
                                                                            </ng-bind-html>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-4" ng-if="chatRes.imagelist[$index+1] != null">
                                                                    <div class="img-box">
                                                                        <a ng-href="{{chatRes.imagelist[$index+1].Image}}"  data-fancybox="group" rel="gallary" fancybox >
                                                                            <img ng-src="{{chatRes.imagelist[$index+1].Image}}" class="img-full">
                                                                        </a>
                                                                    </div>
                                                                    <div class="text-box" ng-if="chatRes.imagelist[$index+1].Text!='Text'">
                                                                        <span>
                                                                            <ng-bind-html  ng-bind-html="chatRes.imagelist[$index+1].Text|newlines">
                                                                                {{chatRes.imagelist[$index+1].Text}}
                                                                            </ng-bind-html>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xs-4" ng-if="chatRes.imagelist[$index+1] != null">
                                                                    <div class="img-box">
                                                                        <a ng-href="{{chatRes.imagelist[$index+2].Image}}"  data-fancybox="group" rel="gallary" fancybox >
                                                                            <img ng-src="{{chatRes.imagelist[$index+2].Image}}" class="img-full">
                                                                        </a>
                                                                    </div>
                                                                    <div class="text-box" ng-if="chatRes.imagelist[$index+2].Text!='Text'">
                                                                        <span>
                                                                            <ng-bind-html  ng-bind-html="chatRes.imagelist[$index+2].Text|newlines">
                                                                                {{chatRes.imagelist[$index+2].Text}}
                                                                            </ng-bind-html>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <a class='left carousel-control' href='#myCarousel' data-slide='prev'><i class='glyphicon glyphicon-chevron-left'></i></a>
                                                        <a class='right carousel-control' href='#myCarousel' data-slide='next'><i class='glyphicon glyphicon-chevron-right'></i></a>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                        <div class=" clearfix" ng-if="(list.position==='left' &&  (list.msg.type==='SYS_INACTIVE' || list.msg.type==='SYS_FIRST' || list.msg.type === 'SYS_EMPTY_RES'))">
                                            <p class="lastmsg" >
                                                <ng-bind-html ng-bind-html = "list.msg.Text"> 
                                                        {{list.msg.Text}}
                                                </ng-bind-html> 
                                                <!-- <span comp-translate="{{list.msg.Text}}"></span> -->
                                            </p>
                                            
                                        </div>
                                        <div class=" clearfix" ng-if="(list.position==='left' &&  (list.msg.type === 'SYS_AUTO'))">
                                            <p class="lastmsg" >
                                                <ng-bind-html ng-bind-html = "list.msg.Text"> 
                                                    {{list.msg.Text}}
                                                </ng-bind-html> 
                                                
                                                <!-- <span comp-translate="{{list.msg.Text}}"></span> -->
                                            </p>
                                        </div>
                                        <p class="lastmsg">
                                            <small class="chatTime">
                                                <span class="glyphicon glyphicon-time">
                                                </span>
                                                {{list.curTime | date: 'HH:mm:ss a'}}
                                            </small>
                                        </p>
                                    </div>
                                </li>
                                     
                            </ul>
                            <!-- <div class="chatType" ng-if="isemp">
                                <div ng-if="isemp">
                                    <uib-tabset active="active">
                                        <uib-tab index="0" heading="Create">
                                            <form class="createpolicy"  name="createpolicy" id="createpolicy">
                                                <div class="form-group" ng-if="policysuccess==1">
                                                    <div class="pull-left col-md-12" >
                                                        <span class="label label-success" >Data Submitted Successfully.</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="policyno" class="">Policy No</label> 
                                                    <input type="text" class="form-control" id="policyno" name="policyno" placeholder="Policy No" ng-model="f.policyno" format-policy ng-minlength="16" ng-maxlength="16" required >
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.policyno.$error" ng-show="createpolicy.policyno.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Policy No</span>
                                                        <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 16 Digit Policy No</span>
                                                    </div> 
                                                </div>
                                                <div class="form-group">
                                                    <label for="inception_date">Inception Date</label> 
                                                    <input type="date" name="inception_date" class="form-control" id="inception_date" placeholder="" ng-model="f.inception_date" required>
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.inception_date.$error" ng-show="createpolicy.inception_date.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Inception date</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="expiry_date">Expiry Date</label> 
                                                    <input type="date" name="expiry_date" class="form-control" id="expiry_date" placeholder="" required ng-model="f.expiry_date">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.expiry_date.$error" ng-show="createpolicy.expiry_date.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Expiry date</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="stamount">Service TAX Amount</label> 
                                                    <input type="number" name="stamount" class="form-control" id="stamount" placeholder="" required ng-model="f.stamount">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.stamount.$error" ng-show="createpolicy.stamount.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Service TAX Amount</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="agent_name">Agent Name</label> 
                                                    <input type="text" name="agent_name" class="form-control" id="agent_name" placeholder="" required ng-model="f.agent_name">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.agent_name.$error" ng-show="createpolicy.agent_name.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent Name</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="prem_amount">Premium Amount</label> 
                                                    <input type="number" name="prem_amount" class="form-control" id="prem_amount" placeholder="" required ng-model="f.prem_amount">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.prem_amount.$error" ng-show="createpolicy.prem_amount.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Premium Amount</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="agent_no">Agent Contact No</label> 
                                                    <input type="text" name="agent_no" class="form-control" id="agent_no" placeholder="" required ng-model="f.agent_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.agent_no.$error" ng-show="createpolicy.agent_no.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent No</span>
                                                        <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit No</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="cust_no">Customer Contact No</label> 
                                                    <input type="text" name="cust_no" class="form-control" id="cust_no" placeholder="" required ng-model="f.cust_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.cust_no.$error" ng-show="createpolicy.cust_no.$touched" >
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter Customer Contact No</span>
                                                        <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit  No</span>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="cust_no">Customer Email</label> 
                                                    <input type="email" name="cust_email" class="form-control" id="cust_email" placeholder="" required ng-model="f.cust_email">
                                                    <div class="pull-right" ng-repeat="(field,value) in createpolicy.cust_email.$error" ng-show="createpolicy.cust_email.$touched">
                                                        <span class="label label-danger" ng-if="field=='required' && value">Please Enter EmailID</span>
                                                        <span class="label label-danger" ng-if="field=='email' && value">Please Enter Valid Email</span>
                                                    </div>
                                                </div>
                                                <div class="form-group" ng-if="policysuccess==-1">
                                                    <div class="pull-right"  >
                                                        <span class="label label-danger">Please Try Again.</span>
                                                    </div>
                                                </div>
                                                <button type="submit" class="btn btn-default" ng-disabled="createpolicy.$invalid" ng-click="createpolicysubmit(f.policyno,f.inception_date,f.expiry_date,f.stamount,f.agent_name,f.prem_amount,f.agent_no,f.cust_no,f.cust_email);">Add</button>
                                            </form>
                                        </uib-tab>
                                        <uib-tab index="1" heading="View" >
                                            <form class="form-inline" name="selectkeyform">
                                                
                                                <div class="form-group col-md-6">
                                                   
                                                    <select ng-model="s.selectedKey" class="form-control skey" required>
                                                        <option ng-repeat="x in keys" value="{{x.id}}">{{x.name}}</option>
                                                    </select>
                                                </div>
                                                <div class="form-group col-md-6">
                                                   
                                                    <input type="text" class="form-control sval" ng-model="s.selectedValue" id="exampleInputEmail2" placeholder="" required>
                                                </div>
                                                <div class="form-group col-md-6 searchdiv">
                                                    <button type="submit" class="btn btn-default btn-primary" ng-disabled="selectkeyform.$invalid" ng-click="getpolicy(s.selectedKey,s.selectedValue);">Search</button>
                                                   
                                                </div>
                                            </form>
                                            <table class="table table-striped">
                                                <thead> 
                                                    <tr>
                                                        <th>
                                                            Policy No
                                                        </th>
                                                        <th>
                                                            Customer Email
                                                        </th>
                                                        <th>

                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="plist in policylist">
                                                        <td>
                                                            {{plist.policyno}} <br>
                                                            <div class="edittoggler editform{{$index}}" style="display:none;">
                                                                <form class="editpolicy"  name="editpolicy" id="editpolicy">
                                                                    <div class="form-group" ng-if="editpolicysuccess==1">
                                                                        <div class="pull-left col-md-12" >
                                                                            <span class="label label-success" >Data Edited Successfully.</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group hidden">
                                                                        <label for="" class=""></label> 
                                                                        <input type="text" class="form-control" id="id" name="id" placeholder="" ng-model="plist._id" required value="{{plist._id}}">
                                                                        
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="policyno" class="">Policy No</label> 
                                                                        <input type="text" class="form-control" id="policyno" name="policyno" placeholder="Policy No" ng-model="plist.policyno" required format-policy ng-minlength="16" ng-maxlength="16" >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.policyno.$error" ng-show="editpolicy.policyno.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Policy No</span>
                                                                            <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 16 Digit Policy No</span>
                                                                        </div> 
                                                                    </div>
                                                                        <div class="form-group">
                                                                        <label for="inception_date">Inception Date</label> 
                                                                        <input type="date" name="inception_date" class="form-control" id="inception_date" placeholder="" ng-model="plist.inceptiondate" required >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.inception_date.$error" ng-show="editpolicy.inception_date.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Inception date</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="expiry_date">Expiry Date</label> 
                                                                        <input type="date" name="expiry_date" class="form-control" id="expiry_date" placeholder="" required ng-model="plist.expirydate">
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.expiry_date.$error" ng-show="editpolicy.expiry_date.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Expiry date</span>
                                                                        </div>
                                                                    </div> 
                                                                    <div class="form-group">
                                                                        <label for="stamount">Service TAX Amount</label> 
                                                                        <input type="number" name="stamount" class="form-control" id="stamount" placeholder="" required ng-model="plist.service_tax_amount" >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.stamount.$error" ng-show="editpolicy.stamount.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Service TAX Amount</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="agent_name">Agent Name</label> 
                                                                        <input type="text" name="agent_name" class="form-control" id="agent_name" placeholder="" required ng-model="plist.agent_name" >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.agent_name.$error" ng-show="editpolicy.agent_name.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent Name</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="prem_amount">Premium Amount</label> 
                                                                        <input type="number" name="prem_amount" class="form-control" id="prem_amount" placeholder="" required ng-model="plist.premium_amount" >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.prem_amount.$error" ng-show="editpolicy.prem_amount.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Premium Amount</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="agent_no">Agent Contact No</label> 
                                                                        <input type="text" name="agent_no" class="form-control" id="agent_no" placeholder="" required ng-model="plist.agent_contact_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.agent_no.$error" ng-show="editpolicy.agent_no.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Agent No</span>
                                                                            <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit No</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="cust_no">Customer Contact No</label> 
                                                                        <input type="text" name="cust_no" class="form-control" id="cust_no" placeholder="" required ng-model="plist.customer_contact_no" format-phone ng-maxlength="10" ng-minlength="10">
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.cust_no.$error" ng-show="editpolicy.cust_no.$touched" >
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter Customer Contact No</span>
                                                                            <span class="label label-danger" ng-if="field=='minlength' && value">Please Enter 10 Digit  No</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label for="cust_no">Customer Email</label> 
                                                                        <input type="email" name="cust_email" class="form-control" id="cust_email" placeholder="" required ng-model="plist.customer_email" >
                                                                        <div class="pull-right" ng-repeat="(field,value) in editpolicy.cust_email.$error" ng-show="editpolicy.cust_email.$touched">
                                                                            <span class="label label-danger" ng-if="field=='required' && value">Please Enter EmailID</span>
                                                                            <span class="label label-danger" ng-if="field=='email' && value">Please Enter Valid Email</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group" ng-if="editpolicysuccess==-1">
                                                                        <div class="pull-right"  >
                                                                            <span class="label label-danger">Please Try Again.</span>
                                                                        </div>
                                                                    </div>
                                                                    <button type="submit" class="btn btn-default" ng-disabled="editpolicy.$invalid" ng-click="editpolicysubmit(plist);">Save</button>
                                                                </form>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            {{plist.customer_email}}
                                                        </td>
                                                        <td>
                                                            <button class="btn btn-xs btn-primary" type="button" ng-click="toggleedit($index);">
                                                                <span class="glyphicon glyphicon-pencil"></span>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <nav aria-label="Page navigation">
                                                <ul class="pagination">
                                                    <li ng-if="showprevlink">
                                                        <a href="#" aria-label="Previous" ng-click="prevpage(viewPage);">
                                                            <span aria-hidden="true">&laquo;</span>
                                                        </a>
                                                    </li>
                                                    <li ng-repeat="n in getNumber(linkcount) track by $index" ng-class="{'active':(($index+1)==viewPage)}">
                                                        <a href="#"  ng-click="getpage($index+1);">{{$index+1}}</a>
                                                    </li>
                                                    <li ng-if="shownextlink">
                                                        <a href="#" aria-label="Next" ng-click="nextpage(viewPage);">
                                                            <span aria-hidden="true">&raquo;</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </nav>
                                        </uib-tab>
                                    </uib-tabset>
                                </div>
                            </div> -->
                            <div class="row newband" ng-if="cur_h != ''">
                                <div class="col-md-12">
                                    <div class="newsstrip">
                                        <marquee>
                                            <p>
                                                {{cur_h}}
                                                <a ng-href="{{cur_i}}"  data-fancybox="news" rel="gallary" fancybox title="{{cur_b}}" data-caption="{{cur_b}}">Click Here</a>
                                            </p>
                                            
                                        </marquee>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer row" >
                            <div class="form-group">
                                <div  class="thumbsIcon col-md-8 pull-right">
                                    <div class="row">
                                        <span class="chatbottomtext pull-right">Was this information useful ? 
                                            <span class="thumbsup glyphicon glyphicon-thumbs-up" ng-click="likeChatClick();"></span>&nbsp; 
                                            <span class="thumbsdown glyphicon glyphicon-thumbs-down" ng-click="dislikeChatClick();"></span>
                                        </span>
                                    </div>
                                </div>
                            
                                <div class="loader_msg col-md-4" ng-if="showMsgLoader">
                                    <div class="row">
                                        <div class="loading">Typing</div>
                                    </div>
                                </div>
                                <div class="input-group chatinputgroup" ng-controller="SpeechRecognitionController as speech" >
                                    <input type="text" class="form-control chatinput"  ng-change="getAutocomplete(chatText);" ng-model="chatText" id="userMsg" placeholder="Type your message here..." autofocus  typeahead="list for list in autocompletelist" ng-keyup="onKeyUp($event)" x-webkit-speech  />
                                    <div class="input-group-addon" ng-speech-recognition-start="" ng-speech-recognition-end="speech.displayTranscript();">
                                        <span class="speechtotext"  >
                                            <i class="fa fa-microphone fa-3"></i>
                                            
                                        </span>
                                    </div>
                                    <audio controls class="hidden ttsaudio" id="ttsaudio" src="">
                                        
                                    </audio>
                                </div>
                                </div>
                                <!--<input type="hidden"  name="user_id" id="user_id"  value="{{sessionId}}" />-->
                                <div id="autocomplete_field"></div>
                                <div id="field_val"></div>
                                <div id="field_id"></div>
                            </div>
                            <!--<a id="mybtn_trigger" class="hidden" ng-click="Speaktext(text);">Speakme</a>-->
                            <div id= "suggestionList">
                                <ul ng-if="autocompletelist.length > 0" class="{{autocompletelist.length}}  ui-menu ui-widget ui-widget-content ui-autocomplete ui-front" id="ui-id-1">
                                    <div class="ui-menu-item-wrapper">
                                        <li class="ui-menu-item autolist" data-id="{{list._id}}" data-value="{{list.questions}}" data-answers="{{list.answers}}"  ng-repeat="list in autocompletelist|filter:chatText" ng-click="pushAutoMsg(list._id,list.questions,list.answers);"  ng-bind-html="list.questions | highlight:chatText" >
                                            <myfilter>{{list.questions}}</myfilter>
                                        </li>
                                    </div>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="chatImage" ng-if="validDomain">
        <img class="clickImage img-circle" src="img/sbi.png" ng-click="showChatwindow();">
    </div>